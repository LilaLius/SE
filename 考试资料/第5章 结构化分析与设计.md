![[Pasted image 20250703024804.png]]

<mark style="background: #FF5582A6;">概要设计（）【工具：结构图123四个指标1234如何影响软件质量】【数据流图的绘制（分解加工（有多个数据流流入和流出、描述的过程中出现多个加工）一致性和完整性的审查⭐】【⭐数据流图映射为结构图（重复的功能；管道的结构；某些结构高扇出，修正结构图）】和详细设计（部件级的设计）</mark>
### 结构化方法
结构化方法就是采用这种自顶向下逐层分解的思想进行分析建模的，自顶向下逐层分解充分体现了分解和抽象的原则。随着分解层次的增加，抽象的级别也越来越低，即越来越接近问题的解。
![[Pasted image 20250102030858.png]]

### 结构化分析方法的分析结果
一套分层的数据流图、一本数据字典（包括E - R 图）、 一组加工规约以及其他补充材料（如非功能性需求等）。
### 数据流图
#### 定义
数据流图（data flow diagram,DFD）描述输入数据流到输出数据流的变换（即加工），用于对系统的功能建模。
#### 基本图形元素

![[Pasted image 20250620162447.png]]
#### 一个简化的图书订购系统的数据流图

> [!example]
> 该考务处理系统的功能需求（工作过程）说明如下：
> • 对考生提交的报名单进行检查。
> • 对合格的报名单编好准考证号后将准考证送给考生，并将汇总后的考生名单送给阅 
> 卷站。
> • 对阅卷站送来的成绩清单进行检查，并根据考试中心制定的合格标准审定合格者。
> • 制作考生通知单并发放给考生。
> • 进行成绩分类统计（按地区、文化程度、职业、考试级别等分类）和试题难度分析，产 
> 生统计分析表。

部分数据流和文件的组成如下所示：

> [!tip]
> 报名单= 地区+ 序号+ 姓名+文化程度+ 职业+ 考试级别+ 通信地址
> 正式报名单=准考证号+ 报名单
> 准考证= 地区+ 序号+ 姓名+准考证号+ 考试级别+ 考场
> 考生 名 单 =｛准考证号+ 考试级别｝ （其中｛w｝表示3 重复多次） 
> 考生名册=正式报名单
> 统计分析表= 分类统计表+ 难度分析表
> 考生通知单=准考证号+ 姓名+通信地址+ 考试级别+ 考试成绩+ 合格标志

![[Pasted image 20250620163445.png]]

### 分层数据流图的画法
1. 画出系统的输入和输出
系统的输入和输出用顶层图来描述，即描述系统从外部的哪些源接收哪些输入数据流，以及系统的哪些输出数据流送往外部的哪些宿。
（ 1） 确定源或宿
分析系统的功能说明，系统外部的人或组织有考生、阅卷站和考试中心，他们都向系统提供信息（数据流）并接收系统输出的信息（数据流），因此，他们都既是源又是宿。
（ 2） 确定加工
顶层图只有一个加工，即软件系统，根据本例的实际含义可取名为考务处理系统。
（ 3） 确定数据流
顶层图中的数据流就是系统的输入输出信息。分析系统的功能说明，可以确定以下输入数据流和输出数据流。

输入数据流：报名单（来自考生）、成绩清单（来自阅卷站）、合格标准（来自考试中心）。
输出数据流：准考证（送往考生）、考生名单（送往阅卷站）、考生通知书（送往考生）、统 
计分析表（送往考试中心）。

有经验的软件工程师还会想到，软件系统应该对输入数据进行合法性检查，以提高系统的健壮性，避免错误数据对系统造成不良的后果。例如，报名单填写得不完整，成绩清单中各小题得分超出该题得分范围等。因此系统还应增加两个输出数据流：不合格报名单（返回给考生），错误成绩清单（返回给阅卷站）。由于合格标准比较简单，这里就不返回错误的合格标准了（必要时可要求重新输入）。

这两个新增加的输出数据流都是考虑提高系统健壮性而加入的，在画顶层图时可以先不考虑，等到画0 层图时可以发现需要添加这些属于系统的数据流，此时，再回过头来将其添加到顶层图中。
（4） 顶层图通常没有文件
根据以上分析，可画出该系统的顶层图，如图5.5所示。
![[Pasted image 20250620165454.png]]
2. 画出系统内部
将顶层图中的加工（即系统）分解成若干个子加工，并用一些新定义的数据流进行连接, 使得系统的输入数据流（即顶层图的输入数据流）经过一连串的加工处理后，变换成系统的输出数据流（即顶层图的输出数据流）。这个图即为0 层图。
下面介绍确定加工、数据流、文件、源或宿的一般方法，该方法可适用于绘制0 层图和所有其他子图。
（ 1） 确定加工
这里讲的加工是指父图中某加工分解而成的子加工。通常，可以用下列两种方法来确定加工。
①根据功能分解来确定加工
一个加工实际上反映了系统的一种功能，根据功能分解的原理，可以将一个复杂的功能分解成若干个较小的功能，每个较小的功能就是分解后的子加工。这种方法较多应用于高层 DFD中加工的分解。
②根据业务处理流程确定加工
分析父图中即将分解的加工的业务处理流程，业务流程中的每一步都可能是一个子加工。特别要注意在业务流程中数据流发生变化或数据流的值发生变化的地方，应该存在一个加工，该加工将原数据流（作为该加工的输入数据流）加工处理成变化后的数据流（作为该加工的输出数据流）。例如，考务处理系统中，考生提交的报名单在核准后，系统应给考生一个准考证号，并将其添加到报名单中（称为正式报名单），以使准考证号与相应的考生关联。 
此时在核准的报名单（合格报名单）与正式报名单之间就存在一个加工，该加工的功能是编准考证号，如图5. 6所示。这种方法较多应用于低层DFD中加工的分解，它能描述父加工中输入数据流到输出数据流之间的加工细节。
![[Pasted image 20250620165839.png]]
（2） 确定数据流
当用户把若干数据作为一个单位来处理（即一起到达，一起加工）时，则把这些数据看作一个数据流口口。通常，实际工作环境中的表单就是一种数据流，如报名单、日报表等。
在父图中某加工分解而成的子图中，父图中相应加工的输入输出数据流就是子图边界上的输入输出数据流。另外，在分解后的子加工之间应增添一些新的数据流，这些数据流是加工过程中的中间数据（对某子加工输入数据流的改变），它们与所有子加工一起完成了父图中相应加工的输入数据流到输出数据流的变换。如果某些中间数据需要保存，以备以后使用，那么可以表示为流向文件的数据流。
同一个源或加工可以有多个数据流流向另一个加工，如果它们不是一起到达和一起加工的，那么可以将它们分成多个数据流。例如，在银行自动取款机（ATM）上取钱，客户（源）向"读取银行卡信息”（加工）提供的信息有：与银行卡相关的数据（如卡号等，通过划卡获取）和密码（通过人工录入）。由于它们不是同时到达和同时加工的，所以应看作两个数据流，如图5.7所示。
![[Pasted image 20250620165902.png]]
同样，同一个加工也可以有多个数据流流向另一个加工或宿。
（ 3） 确定文件
在父图中某加工分解而成的子图中，如果父图中该加工存在流向文件的数据流（写文件），或者存在从文件流向该加工的数据流（读文件），则这种文件和相关的数据流都应画在子图中。在分解的子图中，如果需要保存某些中间数据，以备以后使用，那么可以将这些数据组成一个新的文件。在自顶向下画分层数据流图时，新文件（首次出现的文件）至少应有一个加工为其写入记录（即从该加工流向文件的数据流），同时至少存在另一个加工读取该文件的记录（即从文件流向加工的数据流）。
注意，对于从父图中继承下来的文件,在子图中可能只对其读记录，或只对其写记录。
（4） 确定源和宿
通常在0 层图和其他子图中不必画出源和宿。有时为了提高可读性，可以将顶层图中的源和宿画在0 层图中。
当同一个外部实体（人或组织）既是系统的源，又是系统的宿时，可以用同一个图形符号来表示。为了画图的方便，避免图中线的交叉，同一个源或宿也可以重复画在DFD的不同位置，以增加可读性，但他们仍代表同一个实体，如图5 .4 中的“顾客"。
在考务处理系统的0 层图中，采用功能分解方法来确定加工。分析系统的需求说明，可知系统的功能主要分为考试报名及统计成绩两大部分。其中报名工作在考试前进行，统计成绩工作在考试后进行。
为此，定义两个加工：“考试报名”和"统计成绩"。0 层图中的数据流，除了继承了顶层图中的输入数据流和输出数据流外，还应定义这两个加工之间的数据流。由于这两个加工分别在考试前后进行，并不存在直接关系，因此"考试报名”所产生的结果"考生名册”应作为文件保存，以便考试后由“统计成绩”读取。于是,该考务系统的0 层图如图5. 8 所示。
![[Pasted image 20250620170351.png]]

3. 画出加工内部
当 DFD中存在某个比较复杂的加工时，可以将它分解成一张DFD子图。分解的方法是：将该加工看作一个小系统，该加工的输入输出数据流就是这个假设的小系统的输入输出数据流，然后采用画0 层图的方法，画出该加工的子图。
下面介绍考务处理系统0 层图中加工1 的分解。这里根据业务处理流程来确定由加工1分解而成的子加工。分析考务处理系统功能需求说明和0 层图，其中与加工1（考试报名） 相关的业务流程是：首先检查考生送来的报名单，然后编准考证号，并产生准考证,最后产生考生名单和考生名册（文件）。因此，可以将加工1分解成3 个子加工：检查报名单，编准考证号，登记考生。
"检查报名单”加工的功能是，接收考生提交的“报名单"，当检查未通过时产生"不合格报名单”;如通过检查，则产生"合格报名单”。“编准考证号"加工的功能是，为具有合格报名单的考生编准考证号，将“准考证"发送给考生，并将准考证号添加到合格报名单中，形成“正式报名单”。"登记考生”加工的功能是，根据正式报名单制作"考生名册”文件和"考生名单”。其中"合格报名单”和"正式报名单”是新增加的内部数据流,其他数据流都是加工1原来就有的。
在加工1 的分解中没有新的文件产生。
根据上述分析，可以画出加工1分解而成的子图，如图5. 9 所示。
![[Pasted image 20250620170615.png]]
图 5 .9中，虽然“报名单”、“合格报名单”和"不合格报名单"的数据组成是相同的，但它们的性质不同，所以用3 个不同的名字。"正式报名单”是对“合格报名单”的修改（添加了“准考证号"），所以这两个数据流之间必定有一个加工（即"编准考证号"）。
可以用同样的方法画出加工2 分解的DFD子图，如图5.10所示。由于加工“分类统计成绩”和“分析试题难度”是在整个考试工作后期做的，所以，要将“正确成绩清单”保存为“试题得分清单"文件。
![[Pasted image 20250620170717.png]]

4. 重复第3 步，直至每个尚未分解的加工都足够简单
这里假定图5. 9 和图5.10中的每个加工都已足够简单（即不必再分解），该考务处理系统的分层DFD的绘制工作结束。

### 分层数据流图的审查
###### 分层教据流图的一效性和完整性
##### 1 . 分层数据流图的一致性
###### 父图与子图平衡
父图与子图平衡是指任何一张DFD子图边界上的输入输出数据流必须与其父图中对应加工的输入输出数据流保持一致。
![[Pasted image 20250627205416.png]]
图5. 11(b)是父图加工2 的子图，加工2 的输入数据流有M 和N ,输出数据流是T。而 子图边界上的输入数据流是N ,输出数据流是S 和T 。很显然它们是不一致的。
###### 数据守恒
第一种情况是指一个加工所有输出数据流中的数据，必须能从该加工的输入数据流中直接获得,或者能通过该加工的处理而产生。

![[Pasted image 20250627205714.png]]

*正式成绩清单= 准考证号+考试级别+考试成绩+合格标志*
*考生通知单= 准考证号+姓名+通信地址+考试级别+考试成绩+合格标志*

由于"正式成绩清单"中缺少"考生通知单”中的姓名、通信地址等数据，这些数据也无法由加工2. 3 自己产生，因此，图5.13的加工2. 3 不满足数据守恒的条件。而"考生名册”中包含了“报名单”的所有信息，因此，要产生"考生通知单"，加工2. 3 必须读“考生名册"文件, 如图5. 10所示。

![[Pasted image 20250620170717.png]]

> [!quote]
> 报名单= 地区+ 序号+ 姓名+文化程度+ 职业+ 考试级别+ 通信地址  
> 正式报名单=准考证号+ 报名单  
> 准考证= 地区+ 序号+ 姓名+准考证号+ 考试级别+ 考场  
> 考生 名 单 =｛准考证号+ 考试级别｝ （其中｛w｝表示3 重复多次）  
> 考生名册=正式报名单  
> 统计分析表= 分类统计表+ 难度分析表  
> 考生通知单=准考证号+ 姓名+通信地址+ 考试级别+ 考试成绩+ 合格标志

<mark style="background: #FF5582A6;">读得懂程序流程图；伪代码；河图拍的图；判定表（非通用的工具——静态的结构 帮助开发人员理解河图拍的图，不表述整个算法的执行过程，怎么取其他值）</mark>
怎么用符号描述（那些地方要加）
###### 局部文件

这里讨论分层数据流图中一个文件应画在哪些DFD中，而不该画在哪些DFD中。 

图 5. 14是 图 5. 8 和 图 5. 10的另一种简化表示(只注明相关的文件)。其 中 图 5. 14(b)是 图 5. 14(a)加 工 2 的子图。为何在父图中未画出文件"试题得分清单''呢(如图5. 14(c))? 这是因为"试题得分清单”文件对加工2 来说是它的一个局部文件，即只与加工2 的内部逻辑相关。根据抽象的原则，不应该将这类表示加工细节的局部文件画在其父图中。

![[Pasted image 20250627211744.png]]

###### 一个加工的输出数据流不能与该加工的输入数据流同名

同一个加工的输出数据流和输入数据流，即使它们的组成成分相同，仍应对它们取不同的名字，以表示它们是不同的数据流。例如，“报名单”和“合格报名单”。但是允许一个加工有两个相同的数据流分别流向两个不同的加工。

#### 2 .分层数据流图的完整性
有关分层DFD完整性的检查主要包括以下4 个方面：
①每个加工至少有一个输入数据流和一个输出数据流。
一个没有输入数据流或者没有输出数据流的加工通常是没有意义的。出现这种情况时，常常意味着可能遗漏了某些输入数据流或输出数据流。
②在整套分层数据流图中，每个文件应至少有一个加工读该文件，有另一个加工写该文件。
如果一个文件只写不读，那么建立这个文件通常是没有意义的，除非建立这个文件的目的是被另一个软件系统使用。例如，图书采购系统中的"书库"文件就可能是只写不读的。 
如果一个文件只读不写,那么这个文件的数据从何而来呢？除非这个文件是由另一个软件系统建立的，当前系统只是使用它。例如，图书借书系统中的"书库”文件就可能是只读不写的。
注意，上述对文件的只写不读或只读不写的讨论是对一个系统整套DFD而言的，对某一张DFD来说，文件可以只写不读或只读不写。
③分层数据流图中的每个数据流和文件都必须命名（除了流入或流出文件的数据流）， 并保持与数据字典一致。
分层DFD与数据字典一致是指：分层DFD中的数据流和文件与数据字典中的数据流条目和文件条目存在一一对应关系。如果遗漏了某个数据流或文件的命名，那么在数据字典中也常常遗漏相应的条目。
值得注意的是，当修改分层数据流图时，应同步更新数据字典，以保持两者的一致性。 
使用相关的软件工具将有助于保持分层DFD与数据字典的一致性。
④ 分 层 DFD中的每个基本加工（即不再分解子图的加工）都应有一个加工规约。
加工规约，也称加工小说明，用来描述加工的功能及其处理流程（或称加工逻辑），以帮助理解DFD所完成的功能，详 见 5. 5 节。
### 数据字典

从前面的描述中可以看到数据流图与数据字典是密不可分的，两者结合起来构成软件的逻辑模型（分析模型）。
#### 组成
数据字典由字典条目组成，每个条目描述DFD中的一个元素。

字典条目可分成如下5类 ：数据流、文件、数据项（组成数据流和文件的数据）、加工、源或宿。其中，有关加工逻辑的详细说明可以用"小说明”来描述（见 5. 5 节）。数据字典可以按上述的种类进行分类组织。

#### 字典条目实例
本节以5. 2. 2 节中的考务处理系统为例，给出考务系统的主要数据流和文件的字典条目描述，以更好地理解对应的DFD。

1 . 数据流条目
报名单= 地区+ 序号+ 姓名+ 文化程度+ 职业+ 考试级别+ 通信地址
合格报名单= 报名单
正式报名单=准考证号+ 合格报名单
准考证= 地区+ 序号+ 姓名+ 准考证号+ 考试级别+ 考场
考生名单=｛准考证号+ 考试级别｝
成绩清单=准考证号+ 考试级别+ 考试成绩
正确成绩清单=成绩清单
正式成绩清单=合格标记+ 正确成绩清单
考生通知单=准考证号+ 姓名+ 通信地址+ 考试级别+ 考试成绩+合格标志
统计分析表= 分类统计表+ 难度分析表

2 . 文件
考生名册=正式报名单
文件组织：顺序文件，按准考证号升序排序。
![[Pasted image 20250627214536.png]]
文件组织：顺序文件,按第一关键字准考证号升序，第二关键字试题号升序排序。
注解：每道试题的“小分”之和等于"试题分”，"试题分"之和等于"总分"。

### 描述基本加工的小说明
加工逻辑是指用户对这个加工的逻辑要求，即该加工的输出数据流与输入数据流之间的逻辑关系。

加工逻辑的描述方法主要有：结构化语言、判定表、判定树。

#### 结构化语言
结构化语言是介于自然语言和形式语言之间的一种半形式语言，它不如形式语言那样精确，又具有自然语言简单易懂的优点。
#### 判定表
##### 适用条件
加工逻辑包含多个条件，而不同的条件组合需做不同的动作。
##### 判定表的组成

![[Pasted image 20250102033052.png]]
### 结构化设计概述
结构化设计（structured design, SD）是将结构化分析得到的数据流图映射成软件体系结构的一种设计方法,S D 强调模块化、自顶向下逐步求精、信息隐蔽、高内聚低耦合等设计准则。
在结构化方法中，软件设计分为概要设计和详细设计两个步骤。
**概要设计**是对软件系统的总体设计，采用结构化设计方法，其任务是：将系统分解成模块，确定每个模块的功能、接口(模块间传递的数据)及其调用关系，并用模块及对模块的调用来构建软件的体系结构。 
**详细设计**是对模块实现细节的设计，采用结构化程序设计(structured programming,SP)方 法。SA、SD和 SP构成完整的结构化方法体系。
#### 结构图


结构化设计方法中用结构图(structure chart)来描述软件系统的体系结构，指出一个软 件系统由哪些模块组成，以及模块之间的调用关系
![[Pasted image 20250627215951.png]]

##### 结构图的几个概念
结构图描述了模块之间的调用关系，一个模块可以调用另一个模块，被调用的模块还可 
以调用其他的模块，因此，结构图描述了模块之间调用的控制层次。这种控制的层次结构也 
反映了程序的结构。
有一些模块常常可以被多个模块调用，因此，结构图通常不是树形结构，如 图 5. 23所示口门。
![[Pasted image 20250102033457.png]]
下面介绍与结构图相关的几个概念。
(1)深度
深度是指结构图中控制的层数。例如，图 5. 23所示的结构图的深度是5。
( 2 ) 宽度
宽度是指结构图中同一层次上模块总数的最大值。例如，图5. 23所示的结构图的宽度 
为 7。
一个模块的扇出(fan out)是指该模块直接调用的模块数目。例如，图 5.23中模块M 的扇出是4,模块A 的扇出是2,模块B 的扇出是1。
( 4 ) 扇入
一个模块的扇入(fan in)是指能直接调用该模块的模块数目。例如，图 5.23中模块G 的扇入是1,模块I 的扇入是2,模块R 的扇入是4。
深度和宽度在一定程度上反映了程序的规模和复杂程度。相对而言，如果结构图的深度和宽度较大，则说明软件的规模和复杂程度都较大。模块的扇入扇出会影响结构图的深度和宽度。例如，减少模块的扇出，可能导致宽度变小而深度增加。一个模块的扇出过大通常意味着该模块比较复杂,然而扇出太少，可能导致深度的增加。一般情况，一个模块的扇出以3‒ 9 为宜。一个模块的扇入表示有多少模块可直接调用它，反映了该模块的复用(reuse)程度。因此，模块的扇入越大越好。

#### 结构化设计的步骤
结构化设计大致可分两步进行，第一步是建立一个满足软件需求规约的初始结构图，第二步是对结构图进行改进。

![[Pasted image 20250627220340.png]]

### 数据流图到软件体系结构的映射

#### 变换分析
变换分析的任务是将变换型的DFD映射成初始的结构图。

1 . 划定输入流和输出流的边界.确定变换中
![[Pasted image 20250627220833.png]]

2.进行第一级分解
![[Pasted image 20250627220900.png]]

3 .进行第二级分解
![[Pasted image 20250627220932.png]]

4 .标注输入输出信息
#### 分层DFD的映射
对于分层数据流图，0 层图常常反映了系统由哪些子系统组成，此时可先将o 层图映射 成图5. 34的结构图。0 层图每个加工的D F D 子图可映射成以相应模块为根模块的结构子图。如果D F D 子图中的加工还可分解成一张子图，则再将其映射成以相应模块为根模块的结构子图，依次一层一层分解下去，可得到最终的初始结构图。如果初始结构图太大，也可以将它组织成分层的结构图。
![[Pasted image 20250627221127.png|368]]
例如,5. 2. 2 节中考务处理系统的分层DFD,其映射的初始结构图如图5. 35所示。
复杂的D F D 图可能既包含变换流，又包含事务流。此时，根据自顶向下逐层分解的原则，可以先分析外层（把局部的变换流或事务流看作单个加工）的流特性，并将其映射成外层流特性的结构图，然后再根据内层（局部的）流特性，将其映射成以相应模块为根模块的结构子图。
![[Pasted image 20250627221257.png|850]]



<mark style="background: #FF5582A6;">UML符号</mark>
<mark style="background: #FF5582A6;">用况图（怎么回执）</mark>
<mark style="background: #FF5582A6;">类图和对象图（怎么依据表述）</mark>

<mark style="background: #FF5582A6;">状态转换图（电梯）（两部电梯怎么通信怎么节能）（汽车）（前进（123）后退、空挡）</mark>


